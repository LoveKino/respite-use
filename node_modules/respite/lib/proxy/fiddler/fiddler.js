var fiddlerScriptGenerator = require("./fiddlerScriptGenerator/fiddlerScriptGenerator.js");
var fiddlerLauncher = require("./fiddlerLauncher/fiddlerLauncher.js");

module.exports = function(config) {
	if (config.proxy.active !== "fiddler") return;

	var fiddlerConf = config.proxy.servers.fiddler;
	// update script
	fiddlerScriptGenerator.updateScript({
		appPort: config.handlerServer.port,
		fiddlerScriptPath: fiddlerConf.scriptPath,
		debugDomains: config.debugDomains
	});

	// launch fiddler
	fiddlerLauncher.launch({
		fiddlerLaunchPath: fiddlerConf.launchPath
	});
}